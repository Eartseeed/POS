<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>üßæ ‡∫ç‡∫≠‡∫î‡∫ä‡∫≥‡∫•‡∫∞‡ªÄ‡∫á‡∫¥‡∫ô</title>
<link rel="stylesheet" href="pos.css">
</head>

<body class="customer-bg">

<div class="customer-screen">

  <!-- SHOP NAME -->
  <h1 class="shop-name" id="shopName">‡∫Æ‡ªâ‡∫≤‡∫ô‡∫Ç‡∫≠‡∫á‡ªÄ‡∫Æ‡∫ª‡∫≤</h1>

  <!-- BILL -->
  <div class="bill-card">
    <h2>üßæ ‡∫•‡∫≤‡∫ç‡∫Å‡∫≤‡∫ô‡∫™‡∫¥‡∫ô‡∫Ñ‡ªâ‡∫≤</h2>

    <div id="billList" class="bill-list">-</div>

    <div class="total">
      ‡∫•‡∫ß‡∫°‡∫ó‡∫±‡∫á‡ªù‡∫ª‡∫î
      <span id="total">0</span> ‡∫Å‡∫µ‡∫ö
    </div>
  </div>

  <!-- QR -->
  <div class="qr-card">
    <h2>üì± ‡∫™‡∫∞‡ªÅ‡∫Å‡∫ô‡ªÄ‡∫û‡∫∑‡ªà‡∫≠‡∫à‡ªà‡∫≤‡∫ç‡ªÄ‡∫á‡∫¥‡∫ô</h2>

    <!-- ‚≠ê QR ‡∏£‡πâ‡∏≤‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á -->
    <img src="C.jpeg" class="qr-img" alt="QR Payment">

    <p class="hint">
      BCEL ‚Ä¢ OnePay ‚Ä¢ PromptPay<br>
      ‡∫Å‡∫∞‡∫•‡∫∏‡∫ô‡∫≤‡ªÉ‡∫™‡ªà‡∫ç‡∫≠‡∫î‡ªÄ‡∫á‡∫¥‡∫ô‡∫ï‡∫≤‡∫°‡∫à‡ªç
    </p>
  </div>

</div>

<script>
function loadBill(){
  const cart  = JSON.parse(localStorage.getItem("POS_CART")) || {};
  const total = localStorage.getItem("POS_TOTAL") || 0;
  const shop  = JSON.parse(localStorage.getItem("SHOP_INFO")) || {};

  document.getElementById("shopName").innerText =
    shop.name || "‡∫Æ‡ªâ‡∫≤‡∫ô‡∫Ç‡∫≠‡∫á‡ªÄ‡∫Æ‡∫ª‡∫≤";

  document.getElementById("total").innerText =
    Number(total).toLocaleString("en-US");

  const list = document.getElementById("billList");
  list.innerHTML = "";

  if(Object.keys(cart).length === 0){
    list.innerHTML = "<div style='opacity:.6'>‡∫ç‡∫±‡∫á‡∫ö‡ªç‡ªà‡∫°‡∫µ‡∫•‡∫≤‡∫ç‡∫Å‡∫≤‡∫ô</div>";
    return;
  }

  Object.values(cart).forEach(p=>{
    list.innerHTML += `
      <div class="bill-row">
        <span>${p.name} x${p.qty}</span>
        <b>${(p.price * p.qty).toLocaleString()}</b>
      </div>
    `;
  });
}

// realtime update
setInterval(loadBill, 500);
</script>

</body>
</html>