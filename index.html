<!DOCTYPE html>
<html lang="lo">
<head>
<meta charset="UTF-8">
<title>üßæ POS</title>

<!-- MAIN STYLE -->
<link rel="stylesheet" href="style.css">
<link rel="stylesheet" href="print.css">
<link rel="stylesheet" href="Phetsarath OT.css">

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#22c55e">

<style>
/* ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô print ‡πÄ‡∏û‡∏µ‡πâ‡∏¢‡∏ô */
@media print {
  hr {
    border: none;
    border-top: 1px dashed #000;
    margin: 6px 0;
  }

  table {
    width: 100%;
    border-collapse: collapse;
  }

  img {
    max-width: 100%;
  }
}
</style>
</head>

<body>

<h2 class="main-title"></h2>

<!-- MEMBER -->
<div class="member-box modern">
  <input id="memberName" placeholder="üë§ ‡∫ä‡∫∑‡ªà‡∫•‡∫π‡∫Å‡∫Ñ‡ªâ‡∫≤">
  <input id="memberPhone" placeholder="üìû ‡ªÄ‡∫ö‡∫µ‡ªÇ‡∫ó">
  <input id="discount" type="number" placeholder="üí∏ ‡∫™‡ªà‡∫ß‡∫ô‡∫´‡∫º‡∫∏‡∫î %" value="0">
</div>

<div class="app">

  <!-- LEFT -->
  <div class="left-panel">

    <!-- CATEGORY + SEARCH -->
    <div class="category-bar modern" style="display:flex;gap:10px;align-items:center;">
      <div>
        <label>üìÇ ‡ªù‡∫ß‡∫î</label><br>
        <select id="categorySelect" onchange="filterProducts()"></select>
      </div>

      <div style="flex:1">
        <label>üîç ‡∫Ñ‡∫ª‡ªâ‡∫ô‡∫´‡∫≤</label><br>
        <input
          type="text"
          id="searchInput"
          placeholder="‡∫ä‡∫∑‡ªà / Barcode"
          oninput="filterProducts()"
          style="width:100%;padding:8px;border-radius:10px;border:1px solid #e5e7eb;">
      </div>
    </div>

    <!-- MENU GRID -->
    <div class="menu" id="menu"></div>

  </div>

  <!-- RIGHT -->
  <div class="right-panel">

    <!-- ACTION BUTTONS (PREMIUM POS) -->
<div class="actions-grid modern-grid">

  <!-- CATEGORY -->
  <button class="pos-btn cat"
    onclick="location.href='category.html'">
    üìÇ ‡ªù‡∫ß‡∫î‡∫™‡∫¥‡∫ô‡∫Ñ‡ªâ‡∫≤
  </button>

  <!-- ADD PRODUCT -->
  <button class="pos-btn add"
    onclick="location.href='add-product.html'">
    ‚ûï ‡ªÄ‡∫û‡∫µ‡ªà‡∫°‡ªÄ‡∫°‡∫ô‡∫π
  </button>

  <!-- MANAGE -->
  <button class="pos-btn manage"
    onclick="location.href='manage.html'">
    ‚öôÔ∏è ‡∫à‡∫±‡∫î‡∫Å‡∫≤‡∫ô‡ªÄ‡∫°‡∫ô‡∫π
  </button>

  <!-- REPORT -->
  <button class="pos-btn report"
    onclick="location.href='report.html'">
    üìä ‡∫•‡∫≤‡∫ç‡∫á‡∫≤‡∫ô
  </button>

  <!-- SHOP SETTING -->
  <button class="pos-btn setting"
    onclick="location.href='shop-setting.html'">
    üè™ ‡∫ï‡∫±‡ªâ‡∫á‡∫Ñ‡ªà‡∫≤‡∫Æ‡ªâ‡∫≤‡∫ô
  </button>

  <!-- PRINT (‡∏Ñ‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏°) -->
  <button class="print-btn"
    onclick="printAndClear()">
    üßæ ‡∫û‡∫¥‡∫°‡∫ö‡∫¥‡∫ô
  </button>

  <button class="kitchen-btn"
    onclick="printKitchen()">
    üç≥ ‡∫ö‡∫¥‡∫ô‡∫Ñ‡∫ª‡∫ß
  </button>

</div>
    <!-- RECEIPT (‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠) -->
    <div id="receipt" class="receipt-card">
      <center>
        <img id="shopLogo" class="logo">
        <b id="shopName"></b><br>
        <span id="shopPhone"></span>
      </center>

      <hr>
      <div id="time"></div>
      <hr>
      <div id="items"></div>
      <hr>
      <b id="total">‡∫•‡∫ß‡∫°: 0 ‡∫Å‡∫µ‡∫ö</b>
    </div>

  </div>
</div>

<!-- =====================
     PRINT AREA (80mm)
===================== -->
<div id="printArea" class="print-area">
  <img id="printLogo" class="print-logo">
  <h3 id="printShopName" style="text-align:center;margin:0;"></h3>
  <div id="printDate" style="text-align:center;"></div>

  <div class="print-divider"></div>

  <table class="print-table">
    <tbody id="printItems"></tbody>
  </table>

  <div class="print-divider"></div>

  <div class="print-total">
    ‡∫•‡∫ß‡∫°‡∫ó‡∫±‡∫á‡ªù‡∫ª‡∫î: <span id="printTotal"></span> ‡∫Å‡∫µ‡∫ö
  </div>
</div>

<script src="app.js"></script>
<script src="print.js"></script>

<script>
/* =====================
   LOAD SHOP INFO
===================== */
const shop = JSON.parse(localStorage.getItem("SHOP_INFO") || "{}");

shop.name ||= "‡∫Æ‡ªâ‡∫≤‡∫ô‡∫Ç‡∫≠‡∫á‡∫Ç‡ªâ‡∫≠‡∫ç";

document.getElementById("shopName").innerText = shop.name;
document.getElementById("shopPhone").innerText = shop.phone || "";
document.getElementById("shopLogo").src = shop.logo || "logo.png";

document.getElementById("printShopName").innerText = shop.name;
document.getElementById("printLogo").src = shop.logo || "logo.png";
</script>

<script>
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("service-worker.js");
}
</script>

</body>
</html>